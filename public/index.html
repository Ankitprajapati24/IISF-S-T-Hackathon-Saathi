<!DOCTYPE html>
<html>
<head>
  <title>Hackathon Project</title>
  <style>
    form {
      text-align: center;
      margin-top: 50px;
    }
    input[type="text"] {
      font-size: 2em;
      text-align: center;
      width: 200px;
      letter-spacing: 5px;
    }
    button {
      font-size: 1.5em;
      margin-top: 20px;
      cursor: pointer;
    }

    /* styles.css */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #f4f4f4;
}

#openModal {
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}

#openModal:hover {
    background-color: #0056b3;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
}

.modal-content {
    background-color: white;
    border-radius: 10px;
    width: 300px;
    max-width: 90%;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    text-align: center;
}

.close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 18px;
    font-weight: bold;
    color: #333;
    cursor: pointer;
}

.close-btn:hover {
    color: #ff0000;
}

.action-btn {
    padding: 10px 20px;
    background-color: #28a745;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
}

.action-btn:hover {
    background-color: #218838;
}




  </style>
</head>
<body>
  <form id="statusForm">
    <input type="text" id="statusInput" maxlength="8" />
    <button type="submit">Update</button>
  </form>
  <script>
    // Fetch and display data in the input field
    async function fetchData() {
      try {
        const response = await fetch('/api/data');
        const data = await response.json();

        // Extract statuses as a single string
        const statuses = Object.values(data).map(item => item.status).join('');
        document.getElementById('statusInput').value = statuses;
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    }

    // Update statuses when the form is submitted
    async function updateStatuses(event) {
      event.preventDefault(); // Prevent form submission

      const input = document.getElementById('statusInput');
      const newValue = input.value.trim();

      // Validate the input
      if (!/^[01]{8}$/.test(newValue)) {
        alert('Invalid input. Please enter exactly 8 digits (0 or 1).');
        return;
      }

      try {
        // Send the new value to the backend
        await fetch('/api/update-statuses', {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ statuses: newValue.split('').map(Number) })
        });

        alert('Statuses updated successfully!');
      } catch (error) {
        console.error('Error updating statuses:', error);
      }
    }

    // Attach event listener to the form
    document.getElementById('statusForm').addEventListener('submit', updateStatuses);

    // Auto-refresh the statuses every second
    setInterval(fetchData, 10000);

    // Fetch the initial data
    fetchData();
  </script>
  <script>
    // Fetch and display data in the input field
    async function fetchData() {
      try {
        const response = await fetch('/api/data');
        const data = await response.json();
  
        // Extract statuses as a single string
        const statuses = Object.values(data).map(item => item.status).join('');
        document.getElementById('statusInput').value = statuses;
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    }
  
    // Initial fetch when the page loads
    fetchData();
  </script>


<button id="openModal">Open Modal</button>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h2>Modern Alert</h2>
            <p>This is a stylish alert box with interactive buttons!</p>
            <button id="doneBtn" class="action-btn">Done</button>
        </div>
    </div>

<script>
  // script.js
document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("modal");
    const openModal = document.getElementById("openModal");
    const closeModal = document.querySelector(".close-btn");
    const doneBtn = document.getElementById("doneBtn");

    // Open modal
    openModal.addEventListener("click", () => {
        modal.style.display = "flex";
    });

    // Close modal
    closeModal.addEventListener("click", () => {
        modal.style.display = "none";
    });

    // Done button action
    doneBtn.addEventListener("click", () => {
        alert("You clicked Done!");
        modal.style.display = "none";
    });

    // Close modal when clicking outside the content
    window.addEventListener("click", (event) => {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });
});

</script>


</body>
</html>
